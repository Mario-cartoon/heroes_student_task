# üéÆ –°–∏—Å—Ç–µ–º–∞ –±–æ–µ–≤–æ–π –ª–æ–≥–∏–∫–∏ (Battle Logic System)

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã** –¥–ª—è –∏–≥—Ä—ã —Å –ø–æ—à–∞–≥–æ–≤—ã–º–∏ —Å—Ä–∞–∂–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –∞—Ä–º–∏—è–º–∏. –í–∫–ª—é—á–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∞—Ä–º–∏–π, –ø–æ–∏—Å–∫ —Ü–µ–ª–µ–π, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É—Ç–µ–π –∏ —Å–∏–º—É–ª—è—Ü–∏—é –±–æ—è.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

programs/
‚îú‚îÄ‚îÄ GeneratePresetImpl.java # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä–º–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ SuitableForAttackUnitsFinderImpl.java # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ü–µ–ª–µ–π
‚îî‚îÄ‚îÄ UnitTargetPathFinderImpl.java # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ü–µ–ª–∏
‚îî‚îÄ‚îÄ SimulateBattleImpl.java #–°–∏–º—É–ª—è—Ü–∏—è –±–∏—Ç–≤—ã (–º–∞—Ö–∞—á–∞)

---

## üß† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç           | –ê–ª–≥–æ—Ä–∏—Ç–º                          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                           |
| ------------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä–º–∏–∏** | **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ù–∞—Ö–æ–¥–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –∞—Ä–º–∏–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–∞—Ä–Ω–æ–π –∞—Ç–∞–∫–æ–π (–∏ –∑–¥–æ—Ä–æ–≤—å–µ–º –ø—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ) –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –æ—á–∫–∞—Ö (1500 –æ—á–∫–æ–≤). –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –º–∞–∫—Å–∏–º—É–º 11 —é–Ω–∏—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞. |
| **–ü–æ–∏—Å–∫ —Ü–µ–ª–µ–π**     | **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä**         | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ **–ø–µ—Ä–µ–¥–æ–≤—ã–µ —é–Ω–∏—Ç—ã** –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞: —Å–∞–º—ã–µ –ª–µ–≤—ã–µ (–¥–ª—è –ª–µ–≤–æ–π –∞—Ä–º–∏–∏) –∏–ª–∏ —Å–∞–º—ã–µ –ø—Ä–∞–≤—ã–µ (–¥–ª—è –ø—Ä–∞–≤–æ–π –∞—Ä–º–∏–∏) –≤ –∫–∞–∂–¥–æ–º —Ä—è–¥—É. –ò—Å–∫–ª—é—á–∞–µ—Ç "–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ" —Ü–µ–ª–∏.               |
| **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É—Ç–∏** | **–ê–ª–≥–æ—Ä–∏—Ç–º A\* (A-star)**         | –ù–∞—Ö–æ–¥–∏—Ç **–∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å** –æ—Ç –∞—Ç–∞–∫—É—é—â–µ–≥–æ –∫ —Ü–µ–ª–∏ —Å —É—á—ë—Ç–æ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (–¥—Ä—É–≥–∏—Ö —é–Ω–∏—Ç–æ–≤). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ** –∏ **—ç–≤—Ä–∏—Å—Ç–∏–∫—É –ß–µ–±—ã—à—ë–≤–∞**.                            |

---

## üìö –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤

### 1. `GeneratePresetImpl`

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(N √ó M √ó 11) = O(N √ó M) –≤ **calculateOptimalArmy()** N - typeCount (–≤—Å–µ–≥–æ 4) M-pounts (–≤—Å–µ–≥–æ 1500)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∞—Ä–º–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –≤ –∑–∞–¥–∞–Ω–Ω—ã—Ö –æ—á–∫–∞—Ö.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

| –ú–µ—Ç–æ–¥                                                                        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                               |
| ---------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| `Army generate(List<Unit> unitList, int maxPoints)`                          | –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞—Ä–º–∏—é —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º –∏ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –≤ –∑–æ–Ω–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (X: 0-2, Y: 0-20). |
| `int[] calculateOptimalArmy(List<Unit> unitList, int maxPoints)`             | –†–µ–∞–ª–∏–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —é–Ω–∏—Ç–æ–≤ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞.          |
| `Army generateArmyCoordinates(List<Unit> unitList, int[] counts, Army army)` | –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —é–Ω–∏—Ç–æ–≤ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –Ω–∞ –ø–æ–ª–µ –±–æ—è.                                             |

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:

- `MAX_COUNT_UNITS_PER_TYPE = 11` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —é–Ω–∏—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞.

---

### 2. `SuitableForAttackUnitsFinderImpl`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –≤—Ä–∞–∂–µ—Å–∫–∏—Ö —é–Ω–∏—Ç–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è **–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –∞—Ç–∞–∫–∏ —Ü–µ–ª–µ–π**.

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(R √ó K log K) = O(N log N) –≤ **getSuitableUnits()** R - —é–Ω–∏—Ç–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ (–≤—Å–µ–≥–æ 3 ) K-—Å–∫–æ–ª–∫—å–æ —é–Ω–∏—Ç–æ–≤ –≤ —Ä—è–¥—É –º–∞–∫—Å

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

| –ú–µ—Ç–æ–¥                                                                                | –û–ø–∏—Å–∞–Ω–∏–µ                                                             |
| ------------------------------------------------------------------------------------ | -------------------------------------------------------------------- |
| `List<Unit> getSuitableUnits(List<List<Unit>> unitsByRow, boolean isLeftArmyTarget)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —é–Ω–∏—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –Ω–∞ –ø–µ—Ä–µ–¥–æ–≤–æ–π –ª–∏–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞. |
| `addLeftmostUnits(List<Unit> sortedRow, List<Unit> result)`                          | –î–æ–±–∞–≤–ª—è–µ—Ç —Å–∞–º—ã—Ö –ª–µ–≤—ã—Ö —é–Ω–∏—Ç–æ–≤ –∏–∑ —Ä—è–¥–∞ (–¥–ª—è –∞—Ç–∞–∫–∏ –ª–µ–≤–æ–π –∞—Ä–º–∏–∏).        |
| `addRightmostUnits(List<Unit> sortedRow, List<Unit> result)`                         | –î–æ–±–∞–≤–ª—è–µ—Ç —Å–∞–º—ã—Ö –ø—Ä–∞–≤—ã—Ö —é–Ω–∏—Ç–æ–≤ –∏–∑ —Ä—è–¥–∞ (–¥–ª—è –∞—Ç–∞–∫–∏ –ø—Ä–∞–≤–æ–π –∞—Ä–º–∏–∏).      |

---

### 3. `UnitTargetPathFinderImpl`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—Ä–∞—Ç—á–∞–π—à–µ–≥–æ –ø—É—Ç–∏ –æ—Ç –∞—Ç–∞–∫—É—é—â–µ–≥–æ —é–Ω–∏—Ç–∞ –∫ —Ü–µ–ª–∏.

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(W √ó H √ó log(W √ó H)) –≤ **findPathAStar()** W - –∫–æ–ª-–≤–æ –∫–ª–µ—Ç–æ–∫ –ø–æ —à–∏—Ä–∏–Ω–µ H - –ø–æ –≤—ã—Å–æ—Ç–µ

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

| –ú–µ—Ç–æ–¥                                                                                                                                | –û–ø–∏—Å–∞–Ω–∏–µ                                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------- |
| `List<Edge> getTargetPath(Unit attackUnit, Unit targetUnit, List<Unit> existingUnitList)`                                            | –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.                              |
| `List<Edge> findPathAStar(int startX, int startY, int targetX, int targetY, List<Unit> obstacles, Unit attackUnit, Unit targetUnit)` | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ A\* —Å 8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é (1.41). |
| `List<Edge> createSimplePath(int startX, int startY, int targetX, int targetY)`                                                      | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä—è–º–æ–≥–æ –ø—É—Ç–∏ (–±–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π).                  |
| `int getUnitCoordinate(Unit unit, String primaryFieldName, String secondaryFieldName)`                                               | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —é–Ω–∏—Ç–∞                                        |

---

### 4. `SimulateBattleImpl`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—é –±–æ—è –º–µ–∂–¥—É –∞—Ä–º–∏–µ–π –∏–≥—Ä–æ–∫–∞ –∏ –∞—Ä–º–∏–µ–π –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(N¬≤ log N) N-–∫–æ–ª-–≤–æ —Ä–∞—É–Ω–¥–æ–≤

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

| –ú–µ—Ç–æ–¥                                                                                                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                  |
| ---------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `void  simulate(Army playerArmy, Army computerArmy)`                                                       | –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥.–°–∏–º—É–ª—è—Ü–∏—è –±–æ—è —Å —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ–º.                                                              |
| ` List<Unit> getSortedAliveUnits(List<Unit> units)`                                                        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∏—Å–æ–∫ –∂–∏–≤—ã—Ö —é–Ω–∏—Ç–æ–≤ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∞—Ç–∞–∫–∏.                                                          |
| `void executeAlternatingMoves(List<Unit> playerUnits, List<Unit> computerUnits, boolean playerMovesFirst)` | –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å —Ö–æ–¥—å–±—ã                                                                            |
| `executeRoundFixedOrder(List<Unit> attackers, List<Unit> defenders)`                                       | –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–∞–∑—É –∞—Ç–∞–∫–∏ –¥–ª—è –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –∑–∞—Ç–µ–º –¥–ª—è –¥—Ä—É–≥–æ–π                                                  |
| `executeSingleAttack(Unit attacker, List<Unit> enemyUnits)`                                                | –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω—É –∞—Ç–∞–∫—É: –ø–æ–ª—É—á–∞–µ—Ç —Ü–µ–ª—å —á–µ—Ä–µ–∑ attacker.getProgram().attack(), –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω, –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ. |
| `calculateEffectiveDamage(Unit attacker, Unit target)`                                                     | –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–Ω —Å —É—á—ë—Ç–æ–º —Ç–∏–ø–∞ —é–Ω–∏—Ç–∞ —Ç–∞–º –≤—Å–µ–≥–æ –∏—Ö 4                                                      |
