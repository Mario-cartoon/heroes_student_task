#  Проект по алгоритмам и структурам данных  - Heroes_student_task

Этот модуль реализует **основные компоненты боевой системы** для игры с пошаговыми сражениями между армиями. Включает генерацию армий, поиск целей, построение путей и симуляцию боя.

---

##  Структура

programs/
├── GeneratePresetImpl.java # Генерация армии противника
├── SuitableForAttackUnitsFinderImpl.java # Определение доступных целей
└── UnitTargetPathFinderImpl.java # Построение пути к цели
└── SimulateBattleImpl.java #Симуляция битвы (махача)

---

##  Используемые алгоритмы

| Компонент           | Алгоритм                          | Описание                                                                                                                                                                           |
| ------------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Генерация армии** | **Динамическое программирование** | Находит оптимальный состав армии с максимальной суммарной атакой (и здоровьем при равенстве) в заданном очках (1500 очков). Учитывает ограничение: максимум 11 юнитов одного типа. |
| **Поиск целей**     | **Геометрический фильтр**         | Определяет только **передовые юниты** противника: самые левые (для левой армии) или самые правые (для правой армии) в каждом ряду. Исключает "заблокированные" цели.               |
| **Построение пути** | **Алгоритм A\* (A-star)**         | Находит **кратчайший путь** от атакующего к цели с учётом препятствий (других юнитов). Использует **8-направленное движение** и **эвристику Чебышёва**.                            |

---

##  Описание классов

### 1. `GeneratePresetImpl`

**Сложность**: O(N × M × 11) = O(N × M) в **calculateOptimalArmy()** N - typeCount (всего 4) M-pounts (всего 1500)
**Назначение**: Генерация оптимальной армии противника в заданных очках.

#### Основные методы:

| Метод                                                                        | Описание                                                                                                               |
| ---------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| `Army generate(List<Unit> unitList, int maxPoints)`                          | Основной метод. Генерирует армию с оптимальным составом и случайными координатами в зоне компьютера (X: 0-2, Y: 0-20). |
| `int[] calculateOptimalArmy(List<Unit> unitList, int maxPoints)`             | Реализует алгоритм динамического программирования для нахождения оптимального количества юнитов каждого типа.          |
| `Army generateArmyCoordinates(List<Unit> unitList, int[] counts, Army army)` | Распределяет сгенерированных юнитов по уникальным координатам на поле боя.                                             |

#### Константы:

- `MAX_COUNT_UNITS_PER_TYPE = 11` — максимальное количество юнитов одного типа.

---

### 2. `SuitableForAttackUnitsFinderImpl`

**Назначение**: Фильтрация списка вражеских юнитов для определения **доступных для атаки целей**.

**Сложность**: O(R × K log K) = O(N log N) в **getSuitableUnits()** R - юнитов в строке (всего 3 ) K-сколкьо юнитов в ряду макс

#### Основные методы:

| Метод                                                                                | Описание                                                             |
| ------------------------------------------------------------------------------------ | -------------------------------------------------------------------- |
| `List<Unit> getSuitableUnits(List<List<Unit>> unitsByRow, boolean isLeftArmyTarget)` | Возвращает список юнитов, находящихся на передовой линии противника. |
| `addLeftmostUnits(List<Unit> sortedRow, List<Unit> result)`                          | Добавляет самых левых юнитов из ряда (для атаки левой армии).        |
| `addRightmostUnits(List<Unit> sortedRow, List<Unit> result)`                         | Добавляет самых правых юнитов из ряда (для атаки правой армии).      |

---

### 3. `UnitTargetPathFinderImpl`

**Назначение**: Построение кратчайшего пути от атакующего юнита к цели.

**Сложность**: O(W × H × log(W × H)) в **findPathAStar()** W - кол-во клеток по ширине H - по высоте

#### Основные методы:

| Метод                                                                                                                                | Описание                                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------- |
| `List<Edge> getTargetPath(Unit attackUnit, Unit targetUnit, List<Unit> existingUnitList)`                                            | Основной метод. Возвращает путь в виде списка координат.                              |
| `List<Edge> findPathAStar(int startX, int startY, int targetX, int targetY, List<Unit> obstacles, Unit attackUnit, Unit targetUnit)` | Реализация алгоритма A\* с 8-направленным движением и диагональной стоимостью (1.41). |
| `List<Edge> createSimplePath(int startX, int startY, int targetX, int targetY)`                                                      | Вспомогательный метод для построения прямого пути (без препятствий).                  |
| `int getUnitCoordinate(Unit unit, String primaryFieldName, String secondaryFieldName)`                                               | Универсальный метод получения координаты юнита                                        |

---

### 4. `SimulateBattleImpl`

**Назначение**: Ссуществляет симуляцию боя между армией игрока и армией компьютера
**Сложность**: O(N² log N) N-кол-во раундов

#### Основные методы:

| Метод                                                                                                      | Описание                                                                                                  |
| ---------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `void  simulate(Army playerArmy, Army computerArmy)`                                                       | Основной метод.Симуляция боя с чередованием.                                                              |
| ` List<Unit> getSortedAliveUnits(List<Unit> units)`                                                        | Возвращает писок живых юнитов по убыванию атаки.                                                          |
| `void executeAlternatingMoves(List<Unit> playerUnits, List<Unit> computerUnits, boolean playerMovesFirst)` | Выполняет поочередность ходьбы                                                                            |
| `executeRoundFixedOrder(List<Unit> attackers, List<Unit> defenders)`                                       | Выполняет фазу атаки для одной стороны, затем для другой                                                  |
| `executeSingleAttack(Unit attacker, List<Unit> enemyUnits)`                                                | Выполняет одну атаку: получает цель через attacker.getProgram().attack(), наносит урон, логирует событие. |
| `calculateEffectiveDamage(Unit attacker, Unit target)`                                                     | Рассчитывает урон с учётом типа юнита там всего их 4                                                      |
